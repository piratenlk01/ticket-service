<div class="card">
    <h5 class="card-header">
        <h5 class="pHeader">งานรอดำเนินการ</h5>
    </h5>
    <div class="card-body">


        <p-confirmDialog [baseZIndex]="10000" rejectButtonStyleClass="p-button-text"></p-confirmDialog>

        <div class="card-group mb-4 mt-4 statuscount">
            <div class="card" *ngFor="let item of countstatus" style="border:none">
                <div class="card-body contentPanel text-center">
                    <p class="pNumber">{{item.CountTotal}}</p>
                    <p class="pText">{{item.StatusDescription}}</p>
                </div>
            </div>
        </div>
        <div class="box-search ">
            <div class="row mb-2">
                <div class="col-md-3 col-sm-6">
                    <label><b>บริษัท</b></label>
                    <select class="form-select" name="ticketType" [(ngModel)]="paragetlist.CompCode">
                        <option class="form-control" disabled aria-selected="true">กรุณาเลือก</option>
                        <option class="form-control" *ngFor="let z of ticketCompany;" [value]="z.id">
                            {{z.text}}
                        </option>
                    </select>
                </div>
                <div class="col-md-3 col-sm-6">
                    <label><b>สถานะ</b></label>
                    <select class="form-select" name="ticketType" [(ngModel)]="paragetlist.Status">
                        <option class="form-control" disabled aria-selected="true">กรุณาเลือก</option>
                        <option class="form-control" *ngFor="let z of ticketStatus;" [value]="z.id">
                            {{z.text}}
                        </option>
                    </select>
                </div>
                <div class="col-md-3 col-sm-6">
                    <label><b>TicketNo</b></label>
                    <input [(ngModel)]="paragetlist.TicketNo" type="text" class="form-control" name="TicketNo"
                        placeholder="Ticket No.">
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-3 col-sm-6">
                    <button class="btn btn-primary btn-sm me-1"><i class="fa fa-search" aria-hidden="true"></i>
                        ค้นหา</button>
                    <button type="submit" class="btn btn-secondary btn-sm me-1"><i class="fa fa-paint-brush"
                            aria-hidden="true"></i> Clear</button>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 mb-4">
                <p-messages [(value)]="Msgs"></p-messages>
            </div>
        </div>
        <p-table [value]="eticketlistview" [paginator]="true" [rows]="50" [showCurrentPageReport]="true"
            responsiveLayout="scroll" styleClass="p-datatable-gridlines"
            currentPageReportTemplate="Showing {first} to {last} of {{eticketlistview.length}} entries"
            [rowsPerPageOptions]="[10,50,100,200]">
            <ng-template pTemplate="header">
                <tr>
                    <th class="text-center" style="width: 70px;">#</th>
                    <th class="text-center">Ticket No.</th>
                    <th class="text-center">บริษัท</th>
                    <th class="text-center">หัวข้อ</th>
                    <th class="text-center">ผู้สร้าง</th>
                    <th class="text-center">วันที่สร้าง</th>
                    <th class="text-center">สถานะ</th>
                    <th class="text-center">ผู้รับผิดชอบ</th>
                    <th class="text-center">ความสำคัญ</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item let-rowIndex="rowIndex">
                <tr>
                    <td class="text-center">{{rowIndex+1}}</td>
                    <td class="text-center">
                        <a [routerLink]="['/jobservice/entry', item.Id]">{{item.TicketNo}}</a>
                    </td>
                    <td class="text-center">{{item.CompName}}</td>
                    <td>{{item.Topic}}</td>
                    <td>{{item.UserCreateName}}</td>
                    <td>{{item.DatetimeCreate}}</td>
                    <td class="text-center">
                        <span *ngIf="item.Status == 1" class="badge badge-InproCut">{{item.StatusDescription}}</span>
                        <span *ngIf="item.Status == 2" class="badge badge-orangeCut">{{item.StatusDescription}}</span>
                        <span *ngIf="item.Status == 3" class="badge badge-orangeCut">{{item.StatusDescription}}</span>
                        <span *ngIf="item.Status == 4" class="badge badge-successCut">{{item.StatusDescription}}</span>
                        <span *ngIf="item.Status == 5" class="badge badge-closedCut">{{item.StatusDescription}}</span>
                    </td>
                    <td>{{item.CurrentAssignToName}}</td>
                    <td>
                        <span *ngIf="item.Priority == 3" class="badge badge-HighCut">{{item.Prioritydescription}}</span>
                        <span *ngIf="item.Priority == 2" class="badge badge-MediumCut">{{item.Prioritydescription}}</span>
                        <span *ngIf="item.Priority == 1" class="badge badge-LowCut">{{item.Prioritydescription}}</span>
                    </td>
                </tr>
            </ng-template>
        </p-table>

    </div>
</div>